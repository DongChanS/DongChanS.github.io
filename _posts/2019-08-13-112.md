---
layout : post
title : Automatic Speech Recognition (2) - Signal processing
author : Shin Dong Chan
category : 'Automatic Speech Recognition'
---


# Automatic speech recognition (2) - 신호처리

다음 강의를 이해하기 위해서는 음성 신호에 대한 백그라운드가 필요할 것 같아서 미리 정리를 하고 가려고 합니다.

## 1) Background

음파는 공기 중에서 발생하는 압력의 흐름이라고 할 수 있습니다.

음파가 공기중에서 흐르다가 마이크와 접촉하게 되면, 전기 신호로 변환되는데요.

이 전기신호는 아날로그(Analog, 연속적인 신호) 신호이기 때문에 양이 매우 많아서 이 데이터를 전부 전송할 수는 없습니다.

그래서 아날로그 신호에 몇몇 처리를 거쳐서 디지털 신호(Digital, 불연속적인 신호)로 변환하는데요. 

이러한 신호를 처리하는 과정에 대해서 공부해보도록 하겠습니다.

### 1-1. 신호 전송의 과정

![11](https://user-images.githubusercontent.com/37765338/62937796-9c21fe00-be08-11e9-86ef-159b1064df6d.png)

- [송신의 과정](https://linecard.tistory.com/22) : 아날로그 신호를 디지털 신호로 만드는 과정

  1. 표본화(Sampling) : **일정한 주기**로 신호의 일부를 추출함.

     - **Sampling rate** : 1초에 추출되는 샘플의 개수

     - 이렇게 추출된 펄스의 Sequence를 PAM(Pulse Amplitude Modulation, 펄스 진폭 변조)이라고 함.
       - PAM 신호 : 시간축에서는 불연속이지만, 진폭축에서는 연속인 함수

  2. 양자화(Quantization) : PAM 신호의 진폭을 일정 범위 이내로 근사시킴
     - 표본화가 시간에 대한 이산화(discretization)라면, 양자화는 진폭에 대한 이산화라고 봐도 무방합니다.

  3. 부호화(Coding)

     양자화된 신호는 전송 시 잡음에 민감하므로, 전송 및 처리에 적합하도록 만듬.

  ![12](https://user-images.githubusercontent.com/37765338/62937800-9e845800-be08-11e9-9579-14967ae3eb5a.png)

  

- 채널 : 신호가 송신기에서 수신기까지 이동하기 위한 통로

  - 외부 잡음과 왜곡에 의해서 신호가 변형되기도 함
  - 제약사항 : **주파수 대역폭**

- 수신 : 채널을 통해서 전송된 디지털 신호를 복원하여 실제 아날로그 신호를 듣는 과정

  - 복원을 위해서는 양자화와 부호화의 역과정인 복호화 & 표본화를 거친다.

  - **샘플들을 통해서 아날로그 신호를 복원할 수 있어야 한다.**

    **![14](https://user-images.githubusercontent.com/37765338/62937802-9f1cee80-be08-11e9-898a-c6ce5c943294.png)**



지금은 모든 과정을 이해하지 않아도 상관없습니다. 

그냥 `"연속적인 음파를 몇몇 조각으로 쪼개서 전송하고, 그것을 우리 귀에서 다시 복원해서 소리를 듣게 된다."` 라고만 이해해도 충분합니다.

이제 이 신호처리 과정을 이해하기 위한 몇몇 용어들에 대해서 살펴보겠습니다.



### 1-2. Fourier transformation



![19](https://user-images.githubusercontent.com/37765338/62937808-a0e6b200-be08-11e9-883e-24f34e15d7d1.png)

임의의 신호 함수 f(x)가 있을 때,

이 함수를 **어떤 주기함수들의 적분**으로 표현이 가능합니다.

- 위의 주기함수들은 진동수가 일정하고, 고유한 크기를 갖고 있습니다.
  - 진동수 = `u`
  - 크기(진폭) = `|F(u)|`

일단은 F(u)가 어떻게 계산되는지는 알 필요가 없습니다. 다만 우리가 이렇게 함수를 표현할 수 있다는 것만 알면 됩니다.



### 1-3. Time domain & Frequency domain

![18](https://user-images.githubusercontent.com/37765338/62937806-9fb58500-be08-11e9-9867-f0092c2aaaa7.png)

- Time domain : 음파의 진폭을 **시간에 따라서** 나타낸 그림
- Frequency domain : 음파의 진폭을 **진동수에 따라서** 나타낸 그림

이제 Fourier transformation에 대해서 알아봤으니, Frequency domain으로 신호를 해석할 수 있습니다.

![19](https://user-images.githubusercontent.com/37765338/62937808-a0e6b200-be08-11e9-883e-24f34e15d7d1.png)

적분 안에 들어있는 항은 진동수가 u이고, 크기가 F(u)이기 때문에, 

진동수(Frequency) - 진폭(Amplitude) 축으로 함수를 그리면 오른쪽과 같이 **F(u)에 대한 연속함수로 해석할 수 있습니다.**

이것을 Frequency domain이라고 합니다.



이렇게 Frequency domain으로 신호를 표현하게 되면 얻는 이점이 있습니다.

> converting the description of the system from the time domain to a frequency domain converts the [differential equations](https://en.wikipedia.org/wiki/Differential_equation) to [algebraic equations](https://en.wikipedia.org/wiki/Algebraic_equation), which are much easier to solve.

음.. 미분방정식을 일반 방정식으로 변형하게 되니까 풀기 쉽다고 합니다. 

왜 그런지는 잘 모르겠지만 아무튼 좋다고 합니다.



### 1-4. Nyquist theorem (표본화 정리)의 직관적인 이해

이번에는 표본화된 아날로그 신호를 수신단에서 복원하기 위한 조건에 대해서 알아보겠습니다.

> Nyquist theorem
>
> : 해당 신호의 최대 진동수의 2배에 해당하는 Sampling rate로 샘플링을 하면, 신호를 완벽히 복원할 수 있다.

상식적으로 접근해봅시다.

샘플들로 신호를 복원하기 위해서는 당연히 샘플이 많아야 합니다. 

예를 들어서, 다음과 같이 표본의 개수가 적다면, 원래 신호를 제대로 복원할 수가 없습니다.

![16](https://user-images.githubusercontent.com/37765338/62937804-9fb58500-be08-11e9-8363-f835bafa7a88.png)

**주기가 일정한 파동**에 대해서 생각해봅시다.

다음 그림과 같이, 샘플을 통해서 원래 신호를 복원하려면 적어도 **한 주기 내에 샘플이 3개는 있어야 합니다.** 

![17](https://user-images.githubusercontent.com/37765338/62937805-9fb58500-be08-11e9-8ec9-c15f130f182a.png)


이 **신호가 삼각함수**라는걸 알고 있다면, 점 3개를 잘 구불구불하게 이어서 원래 삼각함수를 만들 수 있기 때문입니다.

그말인 즉슨, **샘플과 샘플간의 시간 간격**이 **원래 신호의 1/2주기**보다 짧아야 한다는 뜻이 됩니다.

=> 이 말을 식으로 옮기면, `T_s <= 1/2 * T_m` (`T_s : 샘플의 주기, T_m : 신호의 주기`)

즉, 역수를 취하면  

`f_s >= 2 * f_m` (`f_s  : 주파수, Sampling rate`, `f_m` :  아날로그 신호의 진동수) 

가 되며 이것을 Nyquist theorem이라고 합니다.

