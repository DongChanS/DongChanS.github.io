---
layout : post
title : SSAFY 20190104 TIL
author : Shin Dong Chan
tags : ["AWS","EC2","Flask","python","algorithm"]
---

3일에는 알고리즘문제를 풀었는데 추후 코드들을 종합해서 올려보겠습니다.

### AWS EC2 서버 사용

AWS서버 위에서 텔레그램 챗봇을 자동화하고싶어서 일단 AWS EC2 환경설정을 해보았습니다.

1. **AWS**(Amazon Web Service)란? 

   아마존 웹 서비스(Amazon Web Services; AWS)
   
   아마존닷컴이 제공하는 각종 **원격 컴퓨팅 서비스**(웹 서비스)
   
   다른 웹 사이트나 클라이언트측 응용 프로그램에 대해 온라인 서비스를 제공
   
   서비스의 상당수는 최종 사용자에 직접 공개되는 것이 아니고, 다른 개발자가 사용 가능한 기능을 제공하는 플랫폼 제공 (PaaS)
   
   각종 서비스는 REST 프로토콜 및 SOAP 프로토콜을 통해 접근, 이용 및 관리가 가능 비용은 실제 사용량에 따라 결정되며, 일부 서비스의 경우 미리 고정된 금액을 지불함

2. AWS  계정 만들기

   [계정 만들기 가이드](https://tech.cloud.nongshim.co.kr/2018/10/11/%EC%B4%88%EB%B3%B4%EC%9E%90%EB%A5%BC-%EC%9C%84%ED%95%9C-aws-%EC%9B%B9%EA%B5%AC%EC%B6%95-1-aws-%EA%B3%84%EC%A0%95-%EB%A7%8C%EB%93%A4%EA%B8%B0/)를 참고하시면 됩니다.

   주소는 영어로 써야하는데, [이곳](http://www.juso.go.kr/openIndexPage.do)에서 자신의 영어 도로명주소를 찾을 수 있습니다.

3. **EC2** 설정하기 (Amazon Elastic Compute Cloud (Amazon EC2))

   : AWS 클라우드에서 확장식 컴퓨팅을 제공하는 기능

   - EC2의 장점

   하드웨어에 선투자 필요 없음

   빠르게 애플리케이션을 개발, 배포 

   원하는 만큼 가상 서버를 구축, 보안 및 네트워크 구성, 스토리지 관리 가능 

   트래픽 예측 필요성 줄어듬

   - EC2의 세부적인 기능  :  [참고링크](https://tech.cloud.nongshim.co.kr/2018/10/11/%EC%B4%88%EB%B3%B4%EC%9E%90%EB%A5%BC-%EC%9C%84%ED%95%9C-aws-%EC%9B%B9%EA%B5%AC%EC%B6%95-%EC%9B%B9%EC%84%9C%EB%B2%84-%EC%95%84%ED%82%A4%ED%85%8D%EC%B2%98-%EC%86%8C%EA%B0%9C/) 

   - EC2 셋팅 : [가이드](http://burningrizen.tistory.com/18)

     1) 한국을 대상으로 하는 서비스라면 리전을 **서울**로 해야 빠르다고합니다.

     2) 사이드바 -> Instance -> Instance 생성

        : Ubuntu Server(프리티어 사용 가능한 것, 현재는 18.04 LTS)

     3) EC2 Instance 생성이 끝나면 .pem 확장자(private key 형식)

        의 Private key를 발급받을 수 있다.

        (한글로 입력하면 안됩니다.)

        - 바로 접속은 안되므로 Instance State가 pending -> running으로 바뀔때까지 잠시 기다려줍시다.

     4) 우리는 Putty를 사용할건데, putty에서 사용하기 위해서 .pem를 .ppk로 변환해야한다.


4. Putty 셋팅 [참고링크](https://docs.aws.amazon.com/ko_kr/AWSEC2/latest/UserGuide/putty.html)

   ![1](https://user-images.githubusercontent.com/37765338/50677566-d4c15400-103d-11e9-902e-d69df24ea5a7.PNG)

   1) Session -> Host Name : ubuntu@퍼블릭 DNS(IPv4)

   2) SSH - Auth -> Private key PPK파일 주소 건네주기

   ​    -> 단, 파일위치가 바뀌면 안되기때문에 안정적인 디렉토리(ex: 루트디렉토리)를 만들어서 하는것을 추천.

   3) Session -> Saved Sessions : 세션이름(영어)로 아무거나 작성하고, Save 

   4) 이제 컴퓨터를 꺼도 다시 이 셋팅으로 서버를 이용할 수 있다.

   ![2](https://user-images.githubusercontent.com/37765338/50677565-d4c15400-103d-11e9-8ee6-adc2609016e4.png)

   이제 우분투 터미널로 서버를 원격접속 할 수 있게 되었습니다!
   
   
   
   (번외) Mobaxterm을 이용해서 더 편한 UI로 서버를 다룰 수 있다!
     
   ![3](https://user-images.githubusercontent.com/37765338/50679494-f7a43600-1046-11e9-9a0d-ac10b65bbd02.PNG)
   

5. FLASK를 활용한 파이썬 서버구축하기

   [참고링크1](http://yonggari.com/set_to_python_server/)과 [참고링크2](https://docs.aws.amazon.com/ko_kr/elasticbeanstalk/latest/dg/create-deploy-python-flask.html#python-flask-prereq)를 참고했습니다.

   - 항상 처음에는 업데이트하기

   - 파이썬 버전확인

   - pip (파이썬 라이브러리 설치를 도와주는 도구) 설치

   - virtualenv (원하는 파이썬 버전을 설정하는 도구) 설치

     : 작은 파이썬을 새로 설치해서 내가 원하는 모듈만 운용하는 바구니.

     운영체제 안에서 새로운 운영체제를 만들어내는 가상머신과 비슷한 개념이다.

   - virtualenv 이용하여 가상환경 설정

     ​	virtualenv --python python3 dongchan 이런식으로 버전을 명시해줘야 하는듯합니다.

     ​	source ./bin/activate : 가상환경실행



## 함수 문제 set 1

### 문제1

2016년 1월 1일은 금요일입니다. 2016년 a월 b일은 무슨 요일일까요? 두 수 a,b를 입력받아 2016년 a월 b일이 무슨 요일인지 리턴하는 함수, solution을 완성하세요. 요일의 이름은 일요일부터 토요일까지 각각 SUN,MON,TUE,WEB,THU,FRI,SAT입니다. 

예를 들어, a=5,b=24라면 5월 24일은 화요일이므로 문자열 "TUE"를 반환하세요. 

```python
#여기에 코드를 작성하세요
def solution(a,b):
    month_days = [31,29,31,30,31,30,31,31,30,31,30,31]
    whole_days = sum(month_days[:a-1]) + b + 3
    daylist = ["MON","TUE","WED","THU","FRI","SAT","SUN"]
    return daylist[whole_days % 7]

print(solution(5,24))
solution(1,1)
```

```
TUE
```

```
'FRI'
```

### 문제2

어떤 문장의 각 알파벳을 일정한 거리만큼 밀어서 다른 알파벳으로 바꾸는 암호화 방식을 시저 암호라고 합니다. 

예를 들어 AB는 1만큼 밀면 BC가 되고, 3만큼 밀면 DE가 됩니다. z는 1만큼 밀면 a가 됩니다. 

문자열 s와 거리 n을 입력받아 s를 n만큼 민 암호문을 만드는 함수, solution을 완성해 보세요.

제한 조건: 공백은 아무리 밀어도 공백. s는 알파벳 소문자, 대문자, 공백으로만 이루어져 있다. 

s의 길이는 8000이하이다. n은 1이상 25이하인 자연수이다.

```python
# 여기에 코드를 작성하세요
def push(string,n):
    pushed = ""
    for char in string:
        if ord(char) <= ord('Z'):
            pushed += chr((ord(char)+n-ord('A')) % (ord('z')- ord('a')+1) + ord('A'))
        else:
            pushed += chr((ord(char)+n-ord('a')) % (ord('z')- ord('a')+1) + ord('a'))
    return pushed
# 더 좋은 아이디어 : 공백은 그대로 놔둔댔으니 if elif로 알파벳 거르고 나머지는 그냥 더하면 되는거였음.
# 그러면 split을 굳이 할 필요가 없음.

def solution(s,n):
    sol = ["".join(push(x,n)) for x in s.split()]
    return " ".join(sol)

solution("za z",1)
```

```
'ab a'
```

### 문제3

문자열 s는 한 개 이상의 단어로 구성되어 있습니다. 각 단어는 하나 이상의 공백 문자로 구분되어 있습니다. 각 단어의 짝수번째 알파벳은 대문자로, 홀수번째 알파벳은 소문자로 바꾼 문자열을 리턴하는 함수, solution을 완성하세요

제한 사항: 문자열 전체의 짝/홀수 인덱스가 아니라, 단어(공백을 기준)별로 짝/홀수 인덱스를 판단해야 합니다.

```python
# 여기에 코드를 작성하세요

def convert(x):
    return "".join([x[idx].upper() if idx % 2 == 1 else x[idx].lower() for idx in range(len(x))])

def solution(s):
    return " ".join([convert(x) for x in s.split()])

solution("candy crush saga")
```

```
'cAnDy cRuSh sAgA'
```

### 문제4

대학생 새내기들의 90%는 자신이 반에서 평균은 넘는다고 생각합니다, 첫째 줄에는 테스트 케이스의 개수 C가 주어지고, 둘째 줄부터 각 테스트 케이스마다 학생의 수 N(1 ≤ N ≤ 1000, N은 정수)이 첫 수로 주어지고, 이어서 N명의 점수가 주어집니다. 

점수는 0보다 크거나 같고, 100보다 작거나 같은 정수입니다. 각 케이스마다 한 줄씩 평균을 넘는 학생들의 비율을 반올림하여 소수점 셋째 자리까지 출력하세요. 

```python
# 여기에 코드를 작성하세요
C = int(input())
for test_case in range(1,C+1):
    N = int(input())
    scores = list(map(int,input().split()))
    mean = sum(scores)/N
    good_students = [0 for x in scores if x > mean]
    print(f"{len(good_students)/N:.3f}")
```

```
1
5
13 2549 3242 454 6
0.400
```

### 문제5

당신은 리스트의 요소중에서 처음으로 연속되지 않은 요소를 찾아야 합니다.예를 들어, [1, 2, 3, 4, 6, 7, 8] 이라는 리스트에서 1, 2, 3, 4는 모두 연속적이지만 6은 처음으로 연속되지 않은 요소입니다. 

만약에 모든 리스트의 요소가 연속적이라면 null을 반환합니다. 배열에는 최소한 2개의 요소가 있어야 하고 모든 요소의 값은 숫자이며 중복은 없고 오름차순으로 정렬됩니다. 숫자는 음수 또는 양수 모두 가능합니다.

```python
#여기에 코드를 작성하세요

def solution(array):
    N = len(array)
    for x in range(N-1):
        diff = array[x+1] - array[x]
        if diff is not 1:
            return array[x+1]
    
solution([1,2,3,4,5,6,7,8])
#null
```

## 함수 문제 set 2

### 문제1

```python
"""
Colour here:        G G        B G        R G        B R
Becomes colour:      G          R          B          G
   
처리 과정 
R R G B R G B B
 R B R G B R B
  G G B R G G
   G R G B G
    B B R R
     B G R
      R B
       G      
"""
```

삼각형의 첫 행을 문자열로 지정하고 마지막 행을 문자열로 표시하는 최종 색을 반환합니다. 위 예제의 경우 RRGBRGBB를 반환해야합니다. 

입력 문자열에는 대문자 R, G, B 만 포함되며 적어도 하나의 문자가있어 유효하지 않은 입력을  테스트 할 필요가 없습니다. 

한 색상 만 입력으로 받으면 해당 색상을 반환하십시오.

출력 결과

- print(triangle('RRR')) => R

- print(triangle('RG')) => B

- print(triangle('RRRGGGBBBBBB')) => G

- print(triangle('RRGBRGBB')) => G

Adapted from the 2017 British Informatics Olympiad

```python
#여기에 코드를 작성하세요
colordict = {"RG":"B","RB":"G","GR":"B","GB":"R","BR":"G","BG":"R"}

def det(a):
    return a[0] if a[0]==a[1] else colordict[a]
# 다른 아이디어 : set은 -연산이 되는것을 이용해서 det를 잘 구할 수 있다.
def below(string):
    return "".join([det(a+b) for a,b in zip(string,"R"+string[:-1])][1:])
def triangle(string):
    N = len(string)
    for x in range(N):
        print(" "*x, end="")
        print(*string, sep=" ")
        if x == N:
            return string
        string = below(string)

triangle('RRGBRGBB')
triangle('RRRGGGBBBBBB')

```

```
R R G B R G B B
 R B R G B R B
  G G B R G G
   G R G B G
    B B R R
     B G R
      R B
       G
R R R G G G B B B B B B
 R R B G G R B B B B B
  R G R G B G B B B B
   B B B R R R B B B
    B B G R R G B B
     B R B R B R B
      G G G G G G
       G G G G G
        G G G G
         G G G
          G G
           G
```

### 문제2

n개의 정수 리스트가 주어지면, 홀수와 짝수를 분리하고 각각의 조건에 맞게 홀수와 짝수를 정렬하세요.

조건

1. 짝수가 홀수보다 먼저오는 리스트를 반환합니다.

2. 짝수는 오름차순으로 홀수는 내림차순으로 정렬합니다.

3. 리스트의 크기는 적어도 4이상이어야 합니다.

4. 리스트의 요소값으로 0은 존재하지 않습니다.

5. 리스트의 요소값이 반복될 수 있으나 중복은 분리할 때 포함하지 않습니다.

출력결과 

even_and_odd[7, 3 , 14 , 17] --> return [14, 17, 7, 3]
  
  :14는 짝수이기 때문에 가장 먼저 나오고 홀수는 내림차순으로 정렬을 하기 때문에 17, 7, 3 의 순서로 반환됩니다.

```python
# 여기에 코드를 작성하세요

def even_and_odd(array):
    odd,even = [],[]
    for num in array:
        odd.append(num) if num % 2 == 1 else even.append(num)
    
    even_sorted = sorted(list(set(even)))
    odd_sorted = sorted(list(set(odd)))
    # 다른아이디어 : 먼저 sort를 하고 배당하는것도 괜찮겠지만, 그러면 더 비효율적이다.
    return even_sorted+odd_sorted[::-1]

even_and_odd([7,3,14,17])
```

```
[14, 17, 7, 3]
```

### 문제3

정수로 된 리스트를 매개 변수로 가져와 해당 리스트의 모든 숫자를 처리할 수 있는 함수를 작성하세요. 

처리 조건은 다음과 같습니다. 숫자에 정수 제곱근이 있는 경우 제곱근을 해주고 그렇지 않으면 숫자를 제곱합니다. 입력 리스트는 수정할 수 없습니다.

```python
#여기에 코드를 작성하세요
def is_square(num):
    # square이다 == 약수의 개수가 홀수이다
    # 다른 아이디어 : is_integer라는 내장메서드가 있다고함.
    count = 0
    for x in range(1,num):
        if num%x == 0:
            count += 1
    return count % 2 == 1
    
def manipulate(array):
    return [x**2 if is_square(x) else x**(1/2) for x in array]

manipulate(list(range(15)))
```

```
[0.0, 1.0, 4, 9, 2.0, 25, 36, 49, 64, 3.0, 100, 121, 144, 169, 196]
```

### 문제4

원하는 행까지 아래의 패턴을 생성하는 함수를 작성하세요. 

만약 인자가 0이나 음의 정수인 경우 "" 즉, 빈 문자열로 반환하세요.

짝수가 인수로 전달되면 패턴은 통과된 짝수보다 작은 최대 홀수까지 계속되어야 합니다.

```python
"""
예시 
pattern(9):

1
333
55555
7777777
999999999

pattern(6)
1
333
55555

유의
패턴에 공백은 없습니다.
"""
```

```python
# 여기에 코드를 작성하세요
def solution(num):
    if num <= 0:
        return ""
    else:
        height = (num+1)//2
        for line in range(1,height+1):
            print(f"{2*line-1}"*(line))
            
solution(8)
```

```
1
33
555
7777
```

### 문제5

(QWERTY 키보드를 사용하여 타이핑을 한다고 가정할 때) '편안한 단어'는 타이핑 할 때 손을 번갈아 칠 수 있는 단어를 말합니다.

단어를 인자로 받아 그것이 '편안한 단어'인지 여부를 True/False로 반환하는 함수를 만드세요.(모든 단어는 a ~ z까지 오름차순으로 구성된 문자열입니다.)

문자 목록

- 왼손: q, w, e, r, t, a, s, s, d, f, g, z, x, c, v, b

- 오른손: y, u, i, o, p, h, j, k, l, n, m

```python
#여기에 코드를 작성하세요
right_hand = ["y","u","i","o","p","h","j","k","l","n","m"]

def is_comfortable(word):
    before = word[0] in right_hand
    for x in range(1,len(word)):
        after = word[x] in right_hand
        if after != before:
            before = after
        else:
            return False
    return True 

# 오름차순이라는 정보를 이용하면 더 효율적으로 짤 수 있긴한데...
```
