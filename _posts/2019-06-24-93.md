---
layout : post
title : Studyjam 5) Production ML Systems - Architecture (작성중)
author : Shin Dong Chan
category : 'ML Studyjam'
---

저번까지는 어떻게 Unseen data를 잘 예측하는 모델을 만들었는지에 집중했다면,

이번에는 Machine learning **System**에 대해서 알아볼 것입니다.

## 0) ML System?

머신러닝 시스템 중에서 **모델이 차지하는 비율은 5% 이내**

=> 그러면 나머지 95%는??

![1](https://user-images.githubusercontent.com/37765338/60058024-b8b38b00-9721-11e9-809e-cc0b39eb73cd.png)

뭔지는 모르지만 매우 많아보이는데...

이러한 많은 기능들을 하나하나 알아보도록 하겠습니다.

## 1)  What's in a Production ML System

ML System의 필수요건에 대해서 알아보도록 하겠습니다.


![2](https://user-images.githubusercontent.com/37765338/60058025-b94c2180-9721-11e9-83c7-1cd38a14fc69.png)

### 1-1. Data Ingestion

Data Ingestion은 데이터를 적절하게 가져오는 시스템입니다.

1. BigQuery : Structured Batch Data Ingestion

   ![3](https://user-images.githubusercontent.com/37765338/60058026-b94c2180-9721-11e9-9bad-74bc0fdd7e15.png)

   빅쿼리는 IO 병렬화에 장점을 가지고 있습니다.

   * Apache Beams IO module 사용가능

2. Cloud Storage : Unstructured batch data

   * csv 대신에 TRFrecord 파일을 사용가능하다고 함.
   * you're transforming data from trainings that you can train on it later,

3. Pub/Sub : streaming data

### 1-2. Data Analysis and Validation

데이터에 있는 오류를 잡기 위해 Analysis와 Data validation을 하는 시스템입니다.

1. Data analysis : **Understanding the distribution** of your data

   ![4](https://user-images.githubusercontent.com/37765338/60058027-b94c2180-9721-11e9-9c59-c108619550aa.png)
   
   먼저 데이터의 오류를 잡기 위해서는 데이터의 분포를 파악해야합니다.

   만약 어떤 계기로 인해서 데이터가 변화되었다면, 

   (ex, changed product numbering convention)

   기존 분포와 현재 분포를 비교해서 데이터의 오류를 파악할 수 있을 것입니다.

2. Data validation : 데이터의 오류를 파악하는 기능

   * 데이터 분포를 비교하기

     - center, mode(최빈값), symmetry, skewness

     - likelihood of observing the new distribution given original distribution

   * 데이터가 적절한지 판단하는 기준

     ![5](https://user-images.githubusercontent.com/37765338/60058028-b94c2180-9721-11e9-8485-53c934acb9cb.png)

     ex) 여러 나라의 물품 가격데이터를 US dollor로 환산하여 취급하는 경우

     * 다른 화폐에서는 에러가 안나는데 엔화에서만 에러가 나는경우 -> (1)

     * item parser의 에러때문에 특정 값이 null이 된 경우 -> (2)

3. Data transformation + Trainer

   * Data transformation : feature wrangling 

     (ex, generate feature to integer mappings)

     * dataflow : 
     * dataprep

     
## 2) Training & Serving Design Decisions

high-level decisions around training & model serving

=> 적절한 training & serving 패러다임을 선택할 수 있는 지식을 갖추자!



## 3) Serving model & Designing an Architecture 